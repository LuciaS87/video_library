# Video library

## Story

Many video services collect tutorials, DIY materials, among funny 
and sometimes disturb from learning. 
Your company has been engaged to provide internal service so 
Youtube or the other services videos data can be stored as 
dedicated to specified group of people e.g. people who want 
to learn programming languages, people who are interested 
only with tuning cars programs, videos about how to rise 
children and something like this. Write app which will provide 
content for dedicated users, and you can freely choose 
topic and categories for data.


Important: For the sake of simplicity, focus on the server 
backend side - your primary job is to prepare a suitable API. 
The requirements assume an existing page, but it is not obligatory 
for now - you can test your API with Postman.

## What are you going to learn?

- Learn what Node.js is in general
- Learn how to manage Node.js projects using npm
- Use routes with Express.js
- Learn & practice data management with Node.js Mongoose library
- Use Mongoose dependency, which is a MongoDB object modeling tool
- Create an Express.js backend project
- Learn how to crate back-end using Express.js framework

## Tasks

1. Create MongoDB database in the cloud. This is the primary step, so it should be done before you will start coding.
    - Visit [MongoDB Cloud](https://cloud.mongodb.com/) to create a fully managed cloud database for your project.
    - Add mongoose library to package.json. You can install it via Node Package Manager `npm install mongoose --save`. Connect to created database, and test your server.
    - Create models, which will allow you to communicate with database collection from node.js project.
    - Define a structure of a `User` type, and `Video` data and provide collections to MongoDB by implementing Schema models in your expres.js project. For `User` follow below concept: - `User schema`:
  - _id, autogenerated
  - firstName (string), required
  - lastName (string), required
  - username (string), required
  - age (number)
  - email (string), required
  - password (string), required
  - createdAt (date), required
For `Video`: - `Video schema`:
  - _id, autogenerated
  - url (string), required
  - title (string), required
  - description (string), required
  - tags
  - uploadedBy
  - contactEmail
  - createdAt
  - updatedAt
You can add additional properties and specify their own property types if you want. Please create as roch schema, to bring your application more powerful.

2. As a User, I want to go to the main page to see five random videos. The search bar allows finding videos by title and description (user get 5, or `n` videos containing the provided phrase). There is a possibility to find videos based on selecting tags.
    - Search functionality should be represented by an API endpoint in the web application.
Get random videos `[ GET /api/videos?random=true ]` should return a list of 5 random videos.
    - Given that there are any number ({0...n}) of saved Video data, when I open the website (/), the app visitor should see a list of 5 randomly generated videos.
    - Create a search field which after submitting will list 5 videos containing given phrase. Send given phrase to the endpoint.
    - When user open the website (/), after clicking any tag link, load dynamically 5 videos connected with that tag. Send given tag to the endpoint.

3. As a User, I want to be able to add a new video based on external url (from YouTube, Dailymotion, Vimeo etc.), after that I can extend the data by providing new information.
    - When the user opens the website (/) and click the "Add New Video" link, a new form for adding details of the new video appear; after submitting the form provided, data is saved in database.
    - Adding new video resource should be represented by an API endpoint `[ POST /api/videos ]`.
    - Form should consist based on given fields: `video url`, `video title`, `video description`, `tags`, `uploaded by`, `contact email`.
    - Server should validate given data. Provide the following validation rules: - `video url`:
  - single line text
  - required
  - has to fit url syntax
- `video title`:
  - single line text
  - required
  - minimum length: 3 characters
- `video description`:
  - multi-line text
  - required
- `tags`:
  - single line text input with value(s) starting with #, separated by whitespace
  - optional
- `uploaded by`:
  - single line number input
  - minimum length: 3 characters
  - optional
- `contact email`:
  - single line input
  - has to fit email syntax
  - optional

4. As a User, I want to be able to change details of an existing video, so that I can keep them up-to-date with the current info.
    - When the user opens the website (/), after clicking the Video, see a form filled with the details of the Video. The same form as the `add page`, but filled in with data of the given Video. After submission of the changed data, new data for the Video are saved in the database. This should overwrite the previous details, not creating a new Video.
    - Updating video data should be represented by an API endpoint `[ PUT /video/{{video_id}} ]`.
    - Add an additional checkbox with “archive” label. Archived videos should not be visible when user retrieves data.

5. Create a user login system with registration and login API endpoint based on JWT (JSON WEB TOKEN).
    - When we use `[ POST /register ]` we should be able to send provided user data and save it to database.
    - On the registration page (`/register` route) the visitor can create a registration form. Add javascript file on the frontend side, which will send data in JSON format to `[ POST /register ]` endpoint.
    - Password storage and retrieval uses salted password hashing for maximum security.
    - Please provide both, backend and frontend validation. If email, or password is not in appropriate form, return proper message in response.
    - When we use `[ POST /login ]` we should be able to send provided user data and retrieve JWT token.
    - On the login page (`/login` route) the visitor can log in using the username/password previously created during registration.
    - If the username/password pair doesn't match the error message appears.
    - After logging in, store JWT token in LocalStorage.
    - Restrict updating video only for logged user, so you should send JWT token in HTTP header to check on the backend side if user is logged.

6. [OPTIONAL] If the user is logged in, user can add video to a favourite list.
    - Update user model, and add array for storing user favourite videos. When we send request on `[ POST /user/video/:video_id ]`, a specific video should be add to user favourite list.
    - Implement route for retrieving favourite videos on `[ GET /user/videos ]` for logged user.

## General requirements

None

## Hints

- The starting repository is empty on purpose.
- You can freely use Material-UI or Bootstrap.
- For displaying various (error) messages, you can use the Express Flash package.
- Plan the project with your team mates, create kanban board
- This project base will be used also in the second and third sprint, 
so please focus carefully on all the details, because you will continue work with it.

## Background materials

- <i class="far fa-exclamation"></i> [Node.js MongoDB Tutorial with Examples](https://www.guru99.com/node-js-mongodb.html)
- <i class="far fa-exclamation"></i> [Mongoose - official documentation](https://mongoosejs.com/docs/)
- <i class="far fa-exclamation"></i> [Why do we need the JSON Web Token (JWT) in the modern web?](https://medium.com/swlh/why-do-we-need-the-json-web-token-jwt-in-the-modern-web-8490a7284482)
- <i class="far fa-exclamation"></i> [JSON Web Tokens (JWTs) in Express.js](https://www.digitalocean.com/community/tutorials/nodejs-jwt-expressjs)
